<mat-toolbar color="primary">
    <span>Urbano Manual</span>
</mat-toolbar>

<app-card-default titulo="Cadastro">

  <mat-horizontal-stepper>
    <mat-step label="Dados pessoais" state="phone">

      <form [formGroup]="formulario">

        <mat-form-field class="example-full-width" appearance="fill" style="width: 100%">
          <mat-label>Nome</mat-label>
          <input type="text" matInput formControlName="nome">
        </mat-form-field>

        <mat-form-field class="example-full-width" appearance="fill" style="width: 100%">
          <mat-label>Senha</mat-label>
          <input type="password" matInput formControlName="senha">
        </mat-form-field>

        <div class="row">
          <div class="col-sm-6">
            <mat-form-field class="example-full-width" appearance="fill" style="width: 100%">
              <mat-label>CPF</mat-label>
              <input type="text" matInput formControlName="cpf">
            </mat-form-field>
          </div>
          <div class="col-sm-6">
            <mat-form-field class="example-full-width" appearance="fill" style="width: 100%">
              <mat-label>Idade</mat-label>
              <input type="text" matInput formControlName="idade">
            </mat-form-field>
          </div>
        </div>


      </form>
      
      <div>
        <button mat-button matStepperNext>Próximo</button>
      </div>

    </mat-step>

    <mat-step label="Residencia" state="chat">


      <table mat-table [dataSource]="enderecos" style="width: 100%;">
      
        <ng-container matColumnDef="Endereco">
          <th mat-header-cell *matHeaderCellDef> Endereço </th>
          <td mat-cell *matCellDef="let valor"> {{valor}} </td>
        </ng-container>
      
        <tr mat-header-row *matHeaderRowDef="['Endereco']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['Endereco'];"></tr>
      </table>


      <div class="row" style="margin-top: 20px;">

        <div class="col-sm-10">
          <mat-form-field appearance="fill" style="width: 100%">
            <mat-label>Endereços</mat-label>
            <input matInput [formControl]="endereco">
          </mat-form-field>
        </div>

        <div class="col-sm-2">
          <button mat-button 
                  color="primary"
                  style="height: 50px; width: 100%;"
                  (click)="AdicionarEndereco()">Adicionar endereço</button>
        </div>
      </div>




      <div>
        <button mat-button matStepperPrevious>Voltar</button>
        <button mat-button matStepperNext>Próximo</button>
      </div>

    </mat-step>

    <mat-step label="Renda">

      <table mat-table [dataSource]="rendas" style="width: 100%;">

        <ng-container matColumnDef="descricao">
          <th mat-header-cell *matHeaderCellDef> Descrição </th>
          <td mat-cell *matCellDef="let linha"> {{linha.descricao}} </td>
          <td mat-footer-cell *matFooterCellDef> <b>Total</b> </td>
        </ng-container>
      

        <ng-container matColumnDef="valor">
          <th mat-header-cell *matHeaderCellDef> Valor </th>
          <td mat-cell *matCellDef="let linha"> {{linha.valor | currency}} </td>
          <td mat-footer-cell *matFooterCellDef> <b> {{SomaRenda() | currency}} </b> </td>
        </ng-container>
      
        <tr mat-header-row *matHeaderRowDef="['descricao','valor']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['descricao','valor'];"></tr>
        <tr mat-footer-row *matFooterRowDef="['descricao','valor']"></tr>
      </table>

      <div class="row" style="margin-top: 20px;">
        <div class="col-sm-8">
          <mat-form-field appearance="fill" style="width: 100%;">
            <mat-label>Descrição</mat-label>
            <input matInput [formControl]="descricaoRenda">
          </mat-form-field>    
        </div>
        <div class="col-sm-4">
          <mat-form-field appearance="fill" style="width: 100%;">
            <mat-label>Valor</mat-label>
            <input matInput [formControl]="valorRenda">
          </mat-form-field>
        </div>
      </div>

      <button mat-button 
              color="primary"
              class="ml-auto"
              (click)="AdicionarRenda()">Adicionar renda</button>

    </mat-step>
    
  
  </mat-horizontal-stepper>

</app-card-default>

<app-crud-buttons [showDelete]="false"
                  [showAuxUm]="false"
                  [showPut]="false"
                  labelBotaoPost="Finalizar!"
                  [disablePost]="formulario.status == 'INVALID' || rendas.length == 0 || enderecos.length == 0"
                  (OnClickButtonPost)="Cadastrar()">
</app-crud-buttons>
